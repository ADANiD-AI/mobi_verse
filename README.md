# Nebula Messenger 

<p align="center">
  <img src="https://img.shields.io/badge/Version-1.0.0-blue.svg" alt="Version">
  <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License">
  <img src="https://img.shields.io/badge/Platform-Android-brightgreen.svg" alt="Platform">
  <img src="https://img.shields.io/badge/Status-Active-brightgreen.svg" alt="Status">
</p>

<p align="center">
  <b>A modern, offline-first, and secure voice messaging system built for the future.</b>
</p>

<details>
<summary><strong>Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û (Urdu Translation)</strong></summary>
<p align="right">
  <b>Ø§ÛŒÚ© Ø¬Ø¯ÛŒØ¯ØŒ Ø¢Ù Ù„Ø§Ø¦Ù† ÙØ±Ø³Ù¹ØŒ Ø§ÙˆØ± Ù…Ø­ÙÙˆØ¸ ÙˆØ§Ø¦Ø³ Ù…ÛŒØ³Ø¬Ù†Ú¯ Ø³Ø³Ù¹Ù… Ø¬Ùˆ Ù…Ø³ØªÙ‚Ø¨Ù„ Ú©Û’ Ù„ÛŒÛ’ ØªÛŒØ§Ø± ÛÛ’Û”</b>
</p>
</details>

---

Nebula Messenger is not just another chat app; it's a hyper-reliable and sophisticated communication platform engineered with cutting-edge technology. Its core design philosophy is to provide a seamless experience that remains fully functional even without an internet connection.

<details>
<summary><strong>Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û (Urdu Translation)</strong></summary>
<p align="right">
Ù†ÛŒØ¨ÛŒÙˆÙ„Ø§ Ù…ÛŒØ³Ù†Ø¬Ø± ØµØ±Ù Ø§ÛŒÚ© Ø§ÙˆØ± Ú†ÛŒÙ¹ Ø§ÛŒÙ¾ Ù†ÛÛŒÚº ÛÛ’ØŒ Ø¨Ù„Ú©Û ÛŒÛ Ø§ÛŒÚ© Ø§Ù†ØªÛØ§Ø¦ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ù…ÙˆØ§ØµÙ„Ø§ØªÛŒ Ù¾Ù„ÛŒÙ¹ ÙØ§Ø±Ù… ÛÛ’ Ø¬Ø³Û’ Ø¬Ø¯ÛŒØ¯ ØªØ±ÛŒÙ† Ù¹ÛŒÚ©Ù†Ø§Ù„ÙˆØ¬ÛŒ Ú©ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù¾Ø± Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’Û” Ø§Ø³ Ú©Ø§ Ø¨Ù†ÛŒØ§Ø¯ÛŒ Ù…Ù‚ØµØ¯ Ø§ÛŒÚ© Ø§ÛŒØ³Ø§ ØªØ¬Ø±Ø¨Û ÙØ±Ø§ÛÙ… Ú©Ø±Ù†Ø§ ÛÛ’ Ø¬Ùˆ Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©Ù†Ú©Ø´Ù† Ú©Û’ Ø¨ØºÛŒØ± Ø¨Ú¾ÛŒ Ù…Ú©Ù…Ù„ Ø·ÙˆØ± Ù¾Ø± ÙØ¹Ø§Ù„ Ø±ÛÛ’Û”
</p>
</details>

## ğŸ”® Core Features

*   **ğŸ“¡ Offline-First Architecture:** Send messages even when offline. They sync automatically and reliably the moment a connection is re-established.
*   **âš¡ Real-time Reactive UI:** A blazing-fast and modern UI built with Jetpack Compose that updates instantly with new messages.
*   **âš™ï¸ Resilient Background Sync:** Leverages Android's `WorkManager` to ensure your messages are sent reliably in the background, even if the app is closed.
*   **â˜ï¸ Cloud-Native Backend:** Fully integrated with Firebase (Firestore, Storage, Auth) for a robust and scalable backend.
*   **ğŸ™ï¸ Full Voice Messaging Cycle:** Complete audio recording, sending, receiving, and playback capabilities.
*   **ğŸ›¡ï¸ Secure by Design:** Firebase Security Rules ensure that users can only access their own messages.
*   **ğŸ—ï¸ Modern Architecture:** Built on an MVVM (Model-View-ViewModel) architecture, keeping the codebase clean, scalable, and maintainable.

<details>
<summary><strong>Ø§Ø±Ø¯Ùˆ ØªØ±Ø¬Ù…Û (Urdu Translation)</strong></summary>
<ul dir="rtl">
  <li><b>Ø¢Ù Ù„Ø§Ø¦Ù† ÙØ±Ø³Ù¹ (Offline-First):</b> Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ù†Û ÛÙˆÙ†Û’ Ù¾Ø± Ø¨Ú¾ÛŒ Ù¾ÛŒØºØ§Ù…Ø§Øª Ø¨Ú¾ÛŒØ¬ÛŒÚºÛ” Ø¬ÛŒØ³Û’ ÛÛŒ Ú©Ù†Ú©Ø´Ù† Ø¨Ø­Ø§Ù„ ÛÙˆÚ¯Ø§ØŒ ÛŒÛ Ø®ÙˆØ¯ Ø¨Ø®ÙˆØ¯ Ù…Ø·Ø§Ø¨Ù‚Øª Ù¾Ø°ÛŒØ± (sync) ÛÙˆØ¬Ø§Ø¦Û’ Ú¯Ø§Û”</li>
  <li><b>Ø±ÛŒØ¦Ù„ Ù¹Ø§Ø¦Ù… UI:</b> Jetpack Compose Ú©Û’ Ø³Ø§ØªÚ¾ Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ Ø§ÛŒÚ© Ø§Ù†ØªÛØ§Ø¦ÛŒ ØªÛŒØ² Ø§ÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø§Ù†Ù¹Ø±ÙÛŒØ³ Ø¬Ùˆ Ù†Ø¦Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª Ú©Û’ Ø³Ø§ØªÚ¾ ÙÙˆØ±ÛŒ Ø·ÙˆØ± Ù¾Ø± Ø§Ù¾ ÚˆÛŒÙ¹ ÛÙˆØªØ§ ÛÛ’Û”</li>
  <li><b>Ù¾Ø³ Ù…Ù†Ø¸Ø± Ù…ÛŒÚº Ù…Ø·Ø§Ø¨Ù‚Øª Ù¾Ø°ÛŒØ±ÛŒ (Background Sync):</b> Android Ú©Û’ `WorkManager` Ú©Ø§ Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ØªÛ’ ÛÙˆØ¦Û’ØŒ ÛŒÛ ÛŒÙ‚ÛŒÙ†ÛŒ Ø¨Ù†Ø§ØªØ§ ÛÛ’ Ú©Û Ø¢Ù¾ Ú©Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø·Ø±ÛŒÙ‚Û’ Ø³Û’ Ù¾Ø³ Ù…Ù†Ø¸Ø± Ù…ÛŒÚº Ø¨Ú¾ÛŒØ¬Û’ Ø¬Ø§Ø¦ÛŒÚºØŒ Ú†Ø§ÛÛ’ Ø§ÛŒÙ¾ Ø¨Ù†Ø¯ ÛÛŒ Ú©ÛŒÙˆÚº Ù†Û ÛÙˆÛ”</li>
  <li><b>Ú©Ù„Ø§Ø¤Úˆ Ø§Ù†Ù¹ÛŒÚ¯Ø±ÛŒØ´Ù†:</b> Firebase (Firestore, Storage, Auth) Ú©Û’ Ø³Ø§ØªÚ¾ Ù…Ú©Ù…Ù„ Ø·ÙˆØ± Ù¾Ø± Ù…Ø±Ø¨ÙˆØ·ØŒ Ø¬Ùˆ Ø§ÛŒÚ© Ù…Ø¶Ø¨ÙˆØ· Ø§ÙˆØ± Ù‚Ø§Ø¨Ù„ ØªÙˆØ³ÛŒØ¹ (scalable) Ø¨ÛŒÚ© Ø§ÛŒÙ†Úˆ ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’Û”</li>
  <li><b>ÙˆØ§Ø¦Ø³ Ù…ÛŒØ³Ø¬Ù†Ú¯ Ø³Ø§Ø¦ÛŒÚ©Ù„:</b> Ù…Ú©Ù…Ù„ Ø¢ÚˆÛŒÙˆ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ØŒ Ø¨Ú¾ÛŒØ¬Ù†Û’ØŒ ÙˆØµÙˆÙ„ Ú©Ø±Ù†Û’ Ø§ÙˆØ± Ù¾Ù„Û’ Ø¨ÛŒÚ© Ú©ÛŒ ØµÙ„Ø§Ø­ÛŒØªÛ”</li>
  <li><b>Ù…Ø­ÙÙˆØ¸ ÚˆÛŒÙ¹Ø§ Ø¨ÛŒØ³:</b> Firebase Security Rules Ø§Ø³ Ø¨Ø§Øª Ú©Ùˆ ÛŒÙ‚ÛŒÙ†ÛŒ Ø¨Ù†Ø§ØªÛ’ ÛÛŒÚº Ú©Û Ú©ÙˆØ¦ÛŒ Ø¨Ú¾ÛŒ ØµØ§Ø±Ù ØµØ±Ù Ø§Ù¾Ù†Û’ Ù¾ÛŒØºØ§Ù…Ø§Øª ØªÚ© Ø±Ø³Ø§Ø¦ÛŒ Ø­Ø§ØµÙ„ Ú©Ø± Ø³Ú©ØªØ§ ÛÛ’Û”</li>
  <li><b>Ø¬Ø¯ÛŒØ¯ ÙÙ† ØªØ¹Ù…ÛŒØ± (Modern Architecture):</b> MVVM (Model-View-ViewModel) ÙÙ† ØªØ¹Ù…ÛŒØ± Ù¾Ø± Ø¨Ù†Ø§ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’ØŒ Ø¬Ùˆ Ú©ÙˆÚˆ Ú©Ùˆ ØµØ§ÙØŒ Ù…Ù†Ø¸Ù… Ø§ÙˆØ± Ù‚Ø§Ø¨Ù„ Ø§Ù†ØªØ¸Ø§Ù… Ø¨Ù†Ø§ØªØ§ ÛÛ’Û”</li>
</ul>
</details>

##  Architectural Diagram

This diagram illustrates the entire system flow, showing how each component interacts.

```mermaid
graph TD
    subgraph "Android App (Client)"
        A[ChatScreen UI (Compose)] -- User Action --> B(ChatViewModel)
        B -- Sends/Receives Data --> C{MessageRepository}
        C -- Caches/Reads Local Data --> D[(Room Database)]
        B -- Initiates Send --> E{SatelliteMessenger}
        E -- Persists Message Locally --> D
        E -- Enqueues Upload Task --> F(WorkManager)
        A -- Plays Audio --> G(AudioPlayer)
        A -- Records Audio --> H(AudioRecorder)
    end

    subgraph "Firebase (Backend)"
        I[(Firebase Storage)]
        J[(Firestore Database)]
        K[(Firebase Auth)]
    end

    F -- Uploads Audio File --> I
    F -- Updates Message Status --> J
    C -- Listens for New Messages --> J
    B -- Authenticates User --> K

    style A fill:#bde0fe,stroke:#333,stroke-width:2px
    style B fill:#a2d2ff,stroke:#333,stroke-width:2px
    style C fill:#ffafcc,stroke:#333,stroke-width:2px
    style E fill:#ffc8dd,stroke:#333,stroke-width:2px
    style F fill:#cdb4db,stroke:#333,stroke-width:2px
```

## ğŸ› ï¸ Technology Stack

| Component         | Technology                               |
| ----------------- | ---------------------------------------- |
| **Language**      | Kotlin                                   |
| **UI**            | Jetpack Compose                          |
| **Architecture**  | MVVM, Repository, Clean Architecture     |
| **Backend**       | Firebase (Firestore, Storage, Auth)      |
| **Local Database**| Room Persistence Library                 |
| **Background Jobs**| Android WorkManager                      |

## ğŸ›¡ï¸ Security Rules

Our app's security is paramount. We have implemented strict Firestore rules to ensure data integrity and user privacy.

<details>
<summary>Click to view `firestore.rules`</summary>

```json
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Helper function to check if the user is the authenticated sender
    function isSender(userId) {
      return request.auth.uid == userId;
    }

    // Messages can only be created by the sender.
    // A user can read a message if they are the sender or the receiver.
    match /messages/{messageId} {
      allow create: if isSender(request.resource.data.senderId);
      allow read: if isSender(resource.data.senderId) || isSender(resource.data.receiverId);
      
      // Updates and deletes are disallowed to maintain message history integrity.
      allow update, delete: if false;
    }
  }
}
```
</details>

## ğŸš€ Getting Started

1.  **Clone the repository:**
    ```bash
    git clone <repository_url>
    ```
2.  **Open in Android Studio:** Import the project into the latest version of Android Studio.
3.  **Connect to Firebase:**
    *   Create a new project in the [Firebase Console](https://console.firebase.google.com/).
    *   Add a new Android app to the project with the package name `com.mobiverse.nebula`.
    *   Download the `google-services.json` file and place it in the `app/` directory.
    *   Enable **Authentication** (Anonymous), **Firestore**, and **Storage** in the Firebase Console.
4.  **Build and Run:** Build the app and run it on an emulator or a physical device.

